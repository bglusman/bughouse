!function e(t,n,r){function o(i,l){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!l&&u)return u(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){!function(e){function n(e,t){if("object"!==o(e))return t;for(var r in t)"object"===o(e[r])&&"object"===o(t[r])?e[r]=n(e[r],t[r]):e[r]=t[r];return e}function r(e,t,r){var i=r[0],l=r.length;(e||"object"!==o(i))&&(i={});for(var u=0;l>u;++u){var s=r[u],c=o(s);if("object"===c)for(var f in s){var d=e?a.clone(s[f]):s[f];t?i[f]=n(i[f],d):i[f]=d}}return i}function o(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var a=function(e){return r(e===!0,!1,arguments)},i="merge";a.recursive=function(e){return r(e===!0,!0,arguments)},a.clone=function(e){var t,n,r=e,i=o(e);if("array"===i)for(r=[],n=e.length,t=0;n>t;++t)r[t]=a.clone(e[t]);else if("object"===i){r={};for(t in e)r[t]=a.clone(e[t])}return r},e?t.exports=a:window[i]=a}("object"==typeof t&&t&&"object"==typeof t.exports&&t.exports)},{}],2:[function(e,t,n){var r=function o(e,t){function n(e){P=e.document,_=e.location,R=e.cancelAnimationFrame||e.clearTimeout,N=e.requestAnimationFrame||e.setTimeout}function r(){var e,t=[].slice.call(arguments),n=!(null==t[1]||I.call(t[1])!==D||"tag"in t[1]||"view"in t[1]||"subtree"in t[1]),r=n?t[1]:{},o="class"in r?"class":"className",a={tag:"div",attrs:{}},i=[];if(I.call(t[0])!=M)throw new Error("selector in m(selector, attrs, children) should be a string");for(;e=j.exec(t[0]);)if(""===e[1]&&e[2])a.tag=e[2];else if("#"===e[1])a.attrs.id=e[2];else if("."===e[1])i.push(e[2]);else if("["===e[3][0]){var l=K.exec(e[3]);a.attrs[l[1]]=l[3]||(l[2]?"":!0)}var u=n?t.slice(2):t.slice(1);1===u.length&&I.call(u[0])===L?a.children=u[0]:a.children=u;for(var s in r)r.hasOwnProperty(s)&&(s===o&&null!=r[s]&&""!==r[s]?(i.push(r[s]),a.attrs[s]=""):a.attrs[s]=r[s]);return i.length>0&&(a.attrs[o]=i.join(" ")),a}function a(e,n,o,s,f,d,p,v,h,g,m){try{(null==f||null==f.toString())&&(f="")}catch(b){f=""}if("retain"===f.subtree)return d;var y=I.call(d),w=I.call(f);if(null==d||y!==w){if(null!=d)if(o&&o.nodes){var E=v-s,k=E+(w===L?f:d.nodes).length;u(o.nodes.slice(E,k),o.slice(E,k))}else d.nodes&&u(d.nodes,d);d=new f.constructor,d.tag&&(d={}),d.nodes=[]}if(w===L){for(var x=0,C=f.length;C>x;x++)I.call(f[x])===L&&(f=f.concat.apply([],f),x--,C=f.length);for(var A=[],S=d.length===f.length,T=0,O=1,_=2,N=3,R={},j=!1,x=0;x<d.length;x++)d[x]&&d[x].attrs&&null!=d[x].attrs.key&&(j=!0,R[d[x].attrs.key]={action:O,index:x});for(var K=0,x=0,C=f.length;C>x;x++)if(f[x]&&f[x].attrs&&null!=f[x].attrs.key){for(var Q=0,C=f.length;C>Q;Q++)f[Q]&&f[Q].attrs&&null==f[Q].attrs.key&&(f[Q].attrs.key="__mithril__"+K++);break}if(j){var F=!1;if(f.length!=d.length)F=!0;else for(var $,G,x=0;$=d[x],G=f[x];x++)if($.attrs&&G.attrs&&$.attrs.key!=G.attrs.key){F=!0;break}if(F){for(var x=0,C=f.length;C>x;x++)if(f[x]&&f[x].attrs&&null!=f[x].attrs.key){var z=f[x].attrs.key;R[z]?R[z]={action:N,index:x,from:R[z].index,element:d.nodes[R[z].index]||P.createElement("div")}:R[z]={action:_,index:x}}var H=[];for(var X in R)H.push(R[X]);var W=H.sort(i),J=new Array(d.length);J.nodes=d.nodes.slice();for(var Y,x=0;Y=W[x];x++){if(Y.action===O&&(u(d[Y.index].nodes,d[Y.index]),J.splice(Y.index,1)),Y.action===_){var V=P.createElement("div");V.key=f[Y.index].attrs.key,e.insertBefore(V,e.childNodes[Y.index]||null),J.splice(Y.index,0,{attrs:{key:f[Y.index].attrs.key},nodes:[V]}),J.nodes[Y.index]=V}Y.action===N&&(e.childNodes[Y.index]!==Y.element&&null!==Y.element&&e.insertBefore(Y.element,e.childNodes[Y.index]||null),J[Y.index]=d[Y.from],J.nodes[Y.index]=Y.element)}d=J}}for(var x=0,Z=0,C=f.length;C>x;x++){var te=a(e,n,d,v,f[x],d[Z],p,v+T||T,h,g,m);te!==t&&(te.nodes.intact||(S=!1),T+=te.$trusted?(te.match(/<[^\/]|\>\s*[^<]/g)||[0]).length:I.call(te)===L?te.length:1,d[Z++]=te)}if(!S){for(var x=0,C=f.length;C>x;x++)null!=d[x]&&A.push.apply(A,d[x].nodes);for(var ne,x=0;ne=d.nodes[x];x++)null!=ne.parentNode&&A.indexOf(ne)<0&&u([ne],[d[x]]);f.length<d.length&&(d.length=f.length),d.nodes=A}}else if(null!=f&&w===D){for(var oe=[],ae=[];f.view;){var ie=f.view.$original||f.view,le="diff"==r.redraw.strategy()&&d.views?d.views.indexOf(ie):-1,ue=le>-1?d.controllers[le]:new(f.controller||B),z=f&&f.attrs&&f.attrs.key;if(f=0==re||d&&d.controllers&&d.controllers.indexOf(ue)>-1?f.view(ue):{tag:"placeholder"},"retain"===f.subtree)return d;z&&(f.attrs||(f.attrs={}),f.attrs.key=z),ue.onunload&&ee.push({controller:ue,handler:ue.onunload}),oe.push(ie),ae.push(ue)}if(!f.tag&&ae.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");f.attrs||(f.attrs={}),d.attrs||(d.attrs={});var se=Object.keys(f.attrs),ce=se.length>("key"in f.attrs?1:0);if((f.tag!=d.tag||se.sort().join()!=Object.keys(d.attrs).sort().join()||f.attrs.id!=d.attrs.id||f.attrs.key!=d.attrs.key||"all"==r.redraw.strategy()&&(!d.configContext||d.configContext.retain!==!0)||"diff"==r.redraw.strategy()&&d.configContext&&d.configContext.retain===!1)&&(d.nodes.length&&u(d.nodes),d.configContext&&typeof d.configContext.onunload===q&&d.configContext.onunload(),d.controllers))for(var ue,x=0;ue=d.controllers[x];x++)typeof ue.onunload===q&&ue.onunload({preventDefault:B});if(I.call(f.tag)!=M)return;var ne,fe=0===d.nodes.length;if(f.attrs.xmlns?g=f.attrs.xmlns:"svg"===f.tag?g="http://www.w3.org/2000/svg":"math"===f.tag&&(g="http://www.w3.org/1998/Math/MathML"),fe){if(ne=f.attrs.is?g===t?P.createElement(f.tag,f.attrs.is):P.createElementNS(g,f.tag,f.attrs.is):g===t?P.createElement(f.tag):P.createElementNS(g,f.tag),d={tag:f.tag,attrs:ce?l(ne,f.tag,f.attrs,{},g):f.attrs,children:null!=f.children&&f.children.length>0?a(ne,f.tag,t,t,f.children,d.children,!0,0,f.attrs.contenteditable?ne:h,g,m):f.children,nodes:[ne]},ae.length){d.views=oe,d.controllers=ae;for(var ue,x=0;ue=ae[x];x++)if(ue.onunload&&ue.onunload.$old&&(ue.onunload=ue.onunload.$old),re&&ue.onunload){var de=ue.onunload;ue.onunload=B,ue.onunload.$old=de}}d.children&&!d.children.nodes&&(d.children.nodes=[]),"select"===f.tag&&"value"in f.attrs&&l(ne,f.tag,{value:f.attrs.value},{},g),e.insertBefore(ne,e.childNodes[v]||null)}else ne=d.nodes[0],ce&&l(ne,f.tag,f.attrs,d.attrs,g),d.children=a(ne,f.tag,t,t,f.children,d.children,!1,0,f.attrs.contenteditable?ne:h,g,m),d.nodes.intact=!0,ae.length&&(d.views=oe,d.controllers=ae),p===!0&&null!=ne&&e.insertBefore(ne,e.childNodes[v]||null);if(typeof f.attrs.config===q){var pe=d.configContext=d.configContext||{},ve=function(e,t){return function(){return e.attrs.config.apply(e,t)}};m.push(ve(f,[ne,!fe,pe,d]))}}else if(typeof f!=q){var A;0===d.nodes.length?(f.$trusted?A=c(e,v,f):(A=[P.createTextNode(f)],e.nodeName.match(U)||e.insertBefore(A[0],e.childNodes[v]||null)),d="string number boolean".indexOf(typeof f)>-1?new f.constructor(f):f,d.nodes=A):d.valueOf()!==f.valueOf()||p===!0?(A=d.nodes,h&&h===P.activeElement||(f.$trusted?(u(A,d),A=c(e,v,f)):"textarea"===n?e.value=f:h?h.innerHTML=f:((1===A[0].nodeType||A.length>1)&&(u(d.nodes,d),A=[P.createTextNode(f)]),e.insertBefore(A[0],e.childNodes[v]||null),A[0].nodeValue=f)),d=new f.constructor(f),d.nodes=A):d.nodes.intact=!0}return d}function i(e,t){return e.action-t.action||e.index-t.index}function l(e,t,n,r,o){for(var a in n){var i=n[a],l=r[a];if(a in r&&l===i)"value"===a&&"input"===t&&e.value!=i&&(e.value=i);else{r[a]=i;try{if("config"===a||"key"==a)continue;if(typeof i===q&&0===a.indexOf("on"))e[a]=f(i,e);else if("style"===a&&null!=i&&I.call(i)===D){for(var u in i)(null==l||l[u]!==i[u])&&(e.style[u]=i[u]);for(var u in l)u in i||(e.style[u]="")}else null!=o?"href"===a?e.setAttributeNS("http://www.w3.org/1999/xlink","href",i):"className"===a?e.setAttribute("class",i):e.setAttribute(a,i):a in e&&"list"!==a&&"style"!==a&&"form"!==a&&"type"!==a&&"width"!==a&&"height"!==a?("input"!==t||e[a]!==i)&&(e[a]=i):e.setAttribute(a,i)}catch(s){if(s.message.indexOf("Invalid argument")<0)throw s}}}return r}function u(e,t){for(var n=e.length-1;n>-1;n--)if(e[n]&&e[n].parentNode){try{e[n].parentNode.removeChild(e[n])}catch(r){}t=[].concat(t),t[n]&&s(t[n])}0!=e.length&&(e.length=0)}function s(e){if(e.configContext&&typeof e.configContext.onunload===q&&(e.configContext.onunload(),e.configContext.onunload=null),e.controllers)for(var t,n=0;t=e.controllers[n];n++)typeof t.onunload===q&&t.onunload({preventDefault:B});if(e.children)if(I.call(e.children)===L)for(var r,n=0;r=e.children[n];n++)s(r);else e.children.tag&&s(e.children)}function c(e,t,n){var r=e.childNodes[t];if(r){var o=1!=r.nodeType,a=P.createElement("span");o?(e.insertBefore(a,r||null),a.insertAdjacentHTML("beforebegin",n),e.removeChild(a)):r.insertAdjacentHTML("beforebegin",n)}else e.insertAdjacentHTML("beforeend",n);for(var i=[];e.childNodes[t]!==r;)i.push(e.childNodes[t]),t++;return i}function f(e,t){return function(n){n=n||event,r.redraw.strategy("diff"),r.startComputation();try{return e.call(t,n)}finally{oe()}}}function d(e){var t=$.indexOf(e);return 0>t?$.push(e)-1:t}function p(e){var t=function(){return arguments.length&&(e=arguments[0]),e};return t.toJSON=function(){return e},t}function v(e,t){var n=function(){return(e.controller||B).apply(this,t)||this},r=function(n){return arguments.length>1&&(t=t.concat([].slice.call(arguments,1))),e.view.apply(e,t?[n].concat(t):[n])};r.$original=e.view;var o={controller:n,view:r};return t[0]&&null!=t[0].key&&(o.attrs={key:t[0].key}),o}function h(){V&&(V(),V=null);for(var e,t=0;e=H[t];t++)if(W[t]){var n=X[t].controller&&X[t].controller.$$args?[W[t]].concat(X[t].controller.$$args):[W[t]];r.render(e,X[t].view?X[t].view(W[t],n):"")}Z&&(Z(),Z=null),J=null,Y=new Date,r.redraw.strategy("diff")}function g(e){return e.slice(le[r.route.mode].length)}function m(e,t,n){ae={};var o=n.indexOf("?");-1!==o&&(ae=E(n.substr(o+1,n.length)),n=n.substr(0,o));var a=Object.keys(t),i=a.indexOf(n);if(-1!==i)return r.mount(e,t[a[i]]),!0;for(var l in t){if(l===n)return r.mount(e,t[l]),!0;var u=new RegExp("^"+l.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(u.test(n))return n.replace(u,function(){for(var n=l.match(/:[^\/]+/g)||[],o=[].slice.call(arguments,1,-2),a=0,i=n.length;i>a;a++)ae[n[a].replace(/:|\./g,"")]=decodeURIComponent(o[a]);r.mount(e,t[l])}),!0}}function b(e){if(e=e||event,!e.ctrlKey&&!e.metaKey&&2!==e.which){e.preventDefault?e.preventDefault():e.returnValue=!1;for(var t=e.currentTarget||e.srcElement,n="pathname"===r.route.mode&&t.search?E(t.search.slice(1)):{};t&&"A"!=t.nodeName.toUpperCase();)t=t.parentNode;r.route(t[r.route.mode].slice(le[r.route.mode].length),n)}}function y(){"hash"!=r.route.mode&&_.hash?_.hash=_.hash:e.scrollTo(0,0)}function w(e,n){var r={},o=[];for(var a in e){var i=n?n+"["+a+"]":a,l=e[a],u=I.call(l),s=null===l?encodeURIComponent(i):u===D?w(l,i):u===L?l.reduce(function(e,t){return r[i]||(r[i]={}),r[i][t]?e:(r[i][t]=!0,e.concat(encodeURIComponent(i)+"="+encodeURIComponent(t)))},[]).join("&"):encodeURIComponent(i)+"="+encodeURIComponent(l);l!==t&&o.push(s)}return o.join("&")}function E(e){"?"===e.charAt(0)&&(e=e.substring(1));for(var t=e.split("&"),n={},r=0,o=t.length;o>r;r++){var a=t[r].split("="),i=decodeURIComponent(a[0]),l=2==a.length?decodeURIComponent(a[1]):null;null!=n[i]?(I.call(n[i])!==L&&(n[i]=[n[i]]),n[i].push(l)):n[i]=l}return n}function k(e){var n=d(e);u(e.childNodes,G[n]),G[n]=t}function x(e,t){var n=r.prop(t);return e.then(n),n.then=function(n,r){return x(e.then(n,r),t)},n}function C(e,t){function n(e){f=e||s,p.map(function(e){f===u&&e.resolve(d)||e.reject(d)})}function o(e,t,n,o){if((null!=d&&I.call(d)===D||typeof d===q)&&typeof e===q)try{var a=0;e.call(d,function(e){a++||(d=e,t())},function(e){a++||(d=e,n())})}catch(i){r.deferred.onerror(i),d=i,n()}else o()}function a(){var s;try{s=d&&d.then}catch(p){return r.deferred.onerror(p),d=p,f=l,a()}o(s,function(){f=i,a()},function(){f=l,a()},function(){try{f===i&&typeof e===q?d=e(d):f===l&&"function"==typeof t&&(d=t(d),f=i)}catch(a){return r.deferred.onerror(a),d=a,n()}d===c?(d=TypeError(),n()):o(s,function(){n(u)},n,function(){n(f===i&&u)})})}var i=1,l=2,u=3,s=4,c=this,f=0,d=0,p=[];c.promise={},c.resolve=function(e){return f||(d=e,f=i,a()),this},c.reject=function(e){return f||(d=e,f=l,a()),this},c.promise.then=function(e,t){var n=new C(e,t);return f===u?n.resolve(d):f===s?n.reject(d):p.push(n),n.promise}}function A(e){return e}function S(n){if(!n.dataType||"jsonp"!==n.dataType.toLowerCase()){var r=new e.XMLHttpRequest;if(r.open(n.method,n.url,!0,n.user,n.password),r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300?n.onload({type:"load",target:r}):n.onerror({type:"error",target:r}))},n.serialize===JSON.stringify&&n.data&&"GET"!==n.method&&r.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.deserialize===JSON.parse&&r.setRequestHeader("Accept","application/json, text/*"),typeof n.config===q){var o=n.config(r,n);null!=o&&(r=o)}var a="GET"!==n.method&&n.data?n.data:"";if(a&&I.call(a)!=M&&a.constructor!=e.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return r.send(a),r}var i="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),l=P.createElement("script");e[i]=function(r){l.parentNode.removeChild(l),n.onload({type:"load",target:{responseText:r}}),e[i]=t},l.onerror=function(r){return l.parentNode.removeChild(l),n.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),e[i]=t,!1},l.onload=function(e){return!1},l.src=n.url+(n.url.indexOf("?")>0?"&":"?")+(n.callbackKey?n.callbackKey:"callback")+"="+i+"&"+w(n.data||{}),P.body.appendChild(l)}function T(e,t,n){if("GET"===e.method&&"jsonp"!=e.dataType){var r=e.url.indexOf("?")<0?"?":"&",o=w(t);e.url=e.url+(o?r+o:"")}else e.data=n(t);return e}function O(e,t){var n=e.match(/:[a-z]\w+/gi);if(n&&t)for(var r=0;r<n.length;r++){var o=n[r].slice(1);e=e.replace(n[r],t[o]),delete t[o]}return e}var P,_,N,R,D="[object Object]",L="[object Array]",M="[object String]",q="function",I={}.toString,j=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,K=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,U=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,B=function(){};n(e);var Q,F={appendChild:function(e){Q===t&&(Q=P.createElement("html")),P.documentElement&&P.documentElement!==e?P.replaceChild(e,P.documentElement):P.appendChild(e),this.childNodes=P.childNodes},insertBefore:function(e){this.appendChild(e)},childNodes:[]},$=[],G={};r.render=function(e,n,r){var o=[];if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=d(e),l=e===P,s=l||e===P.documentElement?F:e;l&&"html"!=n.tag&&(n={tag:"html",attrs:{},children:n}),G[i]===t&&u(s.childNodes),r===!0&&k(e),G[i]=a(s,null,t,t,n,G[i],!1,0,null,t,o);for(var c=0,f=o.length;f>c;c++)o[c]()},r.trust=function(e){return e=new String(e),e.$trusted=!0,e},r.prop=function(e){return(null!=e&&I.call(e)===D||typeof e===q)&&typeof e.then===q?x(e):p(e)};var z,H=[],X=[],W=[],J=null,Y=0,V=null,Z=null,ee=[],te=16;r.component=function(e){return v(e,[].slice.call(arguments,1))},r.mount=r.module=function(e,t){if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var n=H.indexOf(e);0>n&&(n=H.length);for(var o,a=!1,i={preventDefault:function(){a=!0,V=Z=null}},l=0;o=ee[l];l++)o.handler.call(o.controller,i),o.controller.onunload=null;if(a)for(var o,l=0;o=ee[l];l++)o.controller.onunload=o.handler;else ee=[];if(W[n]&&typeof W[n].onunload===q&&W[n].onunload(i),!a){r.redraw.strategy("all"),r.startComputation(),H[n]=e,arguments.length>2&&(t=subcomponent(t,[].slice.call(arguments,2)));var u=z=t=t||{controller:function(){}},s=t.controller||B,c=new s;return u===z&&(W[n]=c,X[n]=t),oe(),W[n]}};var ne=!1;r.redraw=function(t){ne||(ne=!0,J&&t!==!0?(N===e.requestAnimationFrame||new Date-Y>te)&&(J>0&&R(J),J=N(h,te)):(h(),J=N(function(){J=null},te)),ne=!1)},r.redraw.strategy=r.prop();var re=0;r.startComputation=function(){re++},r.endComputation=function(){re=Math.max(re-1,0),0===re&&r.redraw()};var oe=function(){"none"==r.redraw.strategy()?(re--,r.redraw.strategy("diff")):r.endComputation()};r.withAttr=function(e,t){return function(n){n=n||event;var r=n.currentTarget||this;t(e in r?r[e]:r.getAttribute(e))}};var ae,ie,le={pathname:"",hash:"#",search:"?"},ue=B,se=!1;return r.route=function(){if(0===arguments.length)return ie;if(3===arguments.length&&I.call(arguments[1])===M){var t=arguments[0],n=arguments[1],o=arguments[2];ue=function(e){var a=ie=g(e);if(!m(t,o,a)){if(se)throw new Error("Ensure the default route matches one of the routes defined in m.route");se=!0,r.route(n,!0),se=!1}};var a="hash"===r.route.mode?"onhashchange":"onpopstate";e[a]=function(){var e=_[r.route.mode];"pathname"===r.route.mode&&(e+=_.search),ie!=g(e)&&ue(e)},V=y,e[a]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){var i=arguments[0],l=(arguments[1],arguments[2],arguments[3]);i.href=("pathname"!==r.route.mode?_.pathname:"")+le[r.route.mode]+l.attrs.href,i.addEventListener?(i.removeEventListener("click",b),i.addEventListener("click",b)):(i.detachEvent("onclick",b),i.attachEvent("onclick",b))}else if(I.call(arguments[0])===M){var u=ie;ie=arguments[0];var s=arguments[1]||{},c=ie.indexOf("?"),f=c>-1?E(ie.slice(c+1)):{};for(var d in s)f[d]=s[d];var p=w(f),v=c>-1?ie.slice(0,c):ie;p&&(ie=v+(-1===v.indexOf("?")?"?":"&")+p);var h=(3===arguments.length?arguments[2]:arguments[1])===!0||u===arguments[0];e.history.pushState?(V=y,Z=function(){e.history[h?"replaceState":"pushState"](null,P.title,le[r.route.mode]+ie)},ue(le[r.route.mode]+ie)):(_[r.route.mode]=ie,ue(le[r.route.mode]+ie))}},r.route.param=function(e){if(!ae)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return ae[e]},r.route.mode="search",r.route.buildQueryString=w,r.route.parseQueryString=E,r.deferred=function(){var e=new C;return e.promise=x(e.promise),e},r.deferred.onerror=function(e){if("[object Error]"===I.call(e)&&!e.constructor.toString().match(/ Error/))throw e},r.sync=function(e){function t(e,t){return function(r){return i[e]=r,t||(n="reject"),0===--a&&(o.promise(i),o[n](i)),r}}var n="resolve",o=r.deferred(),a=e.length,i=new Array(a);if(e.length>0)for(var l=0;l<e.length;l++)e[l].then(t(l,!0),t(l,!1));else o.resolve([]);return o.promise},r.request=function(e){e.background!==!0&&r.startComputation();var t=new C,n=e.dataType&&"jsonp"===e.dataType.toLowerCase(),o=e.serialize=n?A:e.serialize||JSON.stringify,a=e.deserialize=n?A:e.deserialize||JSON.parse,i=n?function(e){return e.responseText}:e.extract||function(e){return 0===e.responseText.length&&a===JSON.parse?null:e.responseText};return e.method=(e.method||"GET").toUpperCase(),e.url=O(e.url,e.data),e=T(e,e.data,o),e.onload=e.onerror=function(n){try{n=n||event;var o=("load"===n.type?e.unwrapSuccess:e.unwrapError)||A,l=o(a(i(n.target,e)),n.target);if("load"===n.type)if(I.call(l)===L&&e.type)for(var u=0;u<l.length;u++)l[u]=new e.type(l[u]);else e.type&&(l=new e.type(l));t["load"===n.type?"resolve":"reject"](l)}catch(n){r.deferred.onerror(n),t.reject(n)}e.background!==!0&&r.endComputation()},S(e),t.promise=x(t.promise,e.initialValue),t.promise},r.deps=function(t){return n(e=t||e),e},r.deps.factory=o,r}("undefined"!=typeof window?window:{});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=r:"function"==typeof define&&define.amd&&define(function(){return r})},{}],3:[function(e,t,n){function r(e,t,n){var r=n?c.invertKey(e):e;return{key:r,pos:c.key2pos(r),role:t.role,color:t.color}}function o(e,t){return e.role===t.role&&e.color===t.color}function a(e,t){return t.sort(function(t,n){return c.distance(e.pos,t.pos)-c.distance(e.pos,n.pos)})[0]}function i(e,t){var n=t.bounds(),i=n.width/8,l=n.height/8,u={},s=[],f=[],d=[],p=[],v=e.orientation!==t.orientation,h={},g="white"===t.orientation;for(var m in e.pieces){var b=r(m,e.pieces[m],v);h[b.key]=b}for(var y=0;y<c.allKeys.length;y++){var w=c.allKeys[y];if(w!==t.movable.dropped[1]){var E=t.pieces[w],k=h[w];E?k?o(E,k)||(d.push(k),p.push(r(w,E,!1))):p.push(r(w,E,!1)):k&&d.push(k)}}return p.forEach(function(e){var t=a(e,d.filter(c.partial(o,e)));if(t){var n=g?t.pos:e.pos,r=g?e.pos:t.pos,f=[(n[0]-r[0])*i,(r[1]-n[1])*l];u[e.key]=[f,f],s.push(t.key)}}),d.forEach(function(e){e.key===t.movable.dropped[0]||c.containsX(s,e.key)||f.push({piece:{role:e.role,color:e.color},left:12.5*(g?e.pos[0]-1:8-e.pos[0])+"%",bottom:12.5*(g?e.pos[1]-1:8-e.pos[1])+"%",opacity:1})}),{anims:u,fadings:f}}function l(e,t){return Math.round(e*t)/t}function u(e){if(e.animation.current.start){var t=1-((new Date).getTime()-e.animation.current.start)/e.animation.current.duration;if(0>=t)e.animation.current={},e.render();else{var n=f.easeInOutCubic(t);for(var r in e.animation.current.anims){var o=e.animation.current.anims[r];o[1]=[l(o[0][0]*n,10),l(o[0][1]*n,10)]}for(var a in e.animation.current.fadings)e.animation.current.fadings[a].opacity=l(n,100);e.render(),c.requestAnimationFrame(function(){u(e)})}}}function s(e,t){var n={orientation:t.orientation,pieces:{}};for(var r in t.pieces)n.pieces[r]={role:t.pieces[r].role,color:t.pieces[r].color};var o=e(),a=i(n,t);if(Object.keys(a.anims).length>0||a.fadings.length>0){var l=t.animation.current.start;t.animation.current={start:(new Date).getTime(),duration:t.animation.duration,anims:a.anims,fadings:a.fadings},l||u(t)}else t.renderRAF();return o}var c=e("./util"),f={easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}};t.exports=function(e,t,n){return function(){var r=[t].concat(Array.prototype.slice.call(arguments,0));if(t.render){if(t.animation.enabled&&!n)return s(c.partialApply(e,r),t);var o=e.apply(null,r);return t.renderRAF(),o}return e.apply(null,r)}}},{"./util":16}],4:[function(e,t,n){var r=e("./board");t.exports=function(e){return{set:e.set,toggleOrientation:e.toggleOrientation,getOrientation:function(){return e.data.orientation},getPieces:function(){return e.data.pieces},getMaterialDiff:function(){return r.getMaterialDiff(e.data)},getFen:e.getFen,dump:function(){return e.data},move:e.apiMove,setPieces:e.setPieces,setCheck:e.setCheck,playPremove:e.playPremove,cancelPremove:e.cancelPremove,cancelMove:e.cancelMove,stop:e.stop,explode:e.explode}}},{"./board":5}],5:[function(e,t,n){function r(e){setTimeout(e,1)}function o(e){e.orientation=T.opposite(e.orientation)}function a(e){e.lastMove=null,g(e,null),s(e)}function i(e,t){Object.keys(t).forEach(function(n){t[n]?e.pieces[n]=t[n]:delete e.pieces[n]}),e.movable.dropped=[]}function l(e,t){var n=t||e.turnColor;Object.keys(e.pieces).forEach(function(t){e.pieces[t].color===n&&"king"===e.pieces[t].role&&(e.check=t)})}function u(e,t,n){e.premovable.current=[t,n],r(T.partial(e.premovable.events.set,t,n))}function s(e){e.premovable.current&&(e.premovable.current=null,r(e.premovable.events.unset))}function c(e,t,n){if(e.autoCastle){var r=e.pieces[n];if("king"===r.role){var o=T.key2pos(t);if(5===o[0]&&(1===o[1]||8===o[1])){var a,i,l,u=T.key2pos(n);if(7===u[0]||8===u[0])a=T.pos2key([8,o[1]]),i=T.pos2key([6,o[1]]),l=T.pos2key([7,o[1]]);else{if(3!==u[0]&&1!==u[0])return;a=T.pos2key([1,o[1]]),i=T.pos2key([4,o[1]]),l=T.pos2key([3,o[1]])}delete e.pieces[t],delete e.pieces[n],delete e.pieces[a],e.pieces[l]={role:"king",color:r.color},e.pieces[i]={role:"rook",color:r.color}}}}}function f(e,t,n){var o=P(function(){if(t===n||!e.pieces[t])return!1;var o=e.pieces[n]&&e.pieces[n].color!==e.pieces[t].color?e.pieces[n]:null;return r(T.partial(e.events.move,t,n,o)),e.pieces[n]=e.pieces[t],delete e.pieces[t],e.lastMove=[t,n],e.check=null,c(e,t,n),r(e.events.change),!0},e)();return o&&(e.movable.dropped=[]),o}function d(e,t,n){var r=f(e,t,n);return r&&(e.movable.dests={},e.turnColor=T.opposite(e.turnColor)),r}function p(e,t,n){return f(e,t,n)}function v(e,t,n){if(n)if(b(e,t,n)){if(d(e,t,n)){var o=_.stop();return g(e,null),r(T.partial(e.movable.events.after,t,n,{premove:!1,holdTime:o})),!0}}else w(e,t,n)?(u(e,t,n),g(e,null)):m(e,n)||y(e,n)?(g(e,n),_.start()):g(e,null);else _.cancel(),g(e,null),"trash"===e.movable.dropOff&&(delete e.pieces[t],r(e.events.change))}function h(e,t){e.selected?t?e.selected!==t?v(e,e.selected,t)&&(e.stats.dragged=!1):_.start():(g(e,null),_.cancel()):(m(e,t)||y(e,t))&&(g(e,t),_.start()),t&&r(T.partial(e.events.select,t))}function g(e,t){e.selected=t,t&&y(e,t)?e.premovable.dests=O(e.pieces,t,e.premovable.castle):e.premovable.dests=null}function m(e,t){var n=e.pieces[t];return n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}function b(e,t,n){return t!==n&&m(e,t)&&(e.movable.free||T.containsX(e.movable.dests[t],n))}function y(e,t){var n=e.pieces[t];return n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function w(e,t,n){return t!==n&&y(e,t)&&T.containsX(O(e.pieces,t,e.premovable.castle),n)}function E(e,t){var n=e.pieces[t];return n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))}function k(e){var t=e.premovable.current;if(t){var n=t[0],o=t[1];b(e,n,o)&&d(e,n,o)&&r(T.partial(e.movable.events.after,n,o,{premove:!0})),s(e)}}function x(e){s(e),h(e,null)}function C(e){e.movable.color=null,e.movable.dests={},x(e)}function A(e,t,n){if(n||e.bounds){n=n||e.bounds();var r=Math.ceil(8*((t[0]-n.left)/n.width));r="white"===e.orientation?r:9-r;var o=Math.ceil(8-8*((t[1]-n.top)/n.height));return o="white"===e.orientation?o:9-o,r>0&&9>r&&o>0&&9>o?T.pos2key([r,o]):void 0}}function S(e){var t={king:0,queen:0,rook:0,bishop:0,knight:0,pawn:0};for(var n in e.pieces){var r=e.pieces[n];t[r.role]+="white"===r.color?1:-1}var o={white:{},black:{}};for(var a in t){var i=t[a];i>0?o.white[a]=i:0>i&&(o.black[a]=-i)}return o}var T=e("./util"),O=e("./premove"),P=e("./anim"),_=e("./hold");t.exports={reset:a,toggleOrientation:o,setPieces:i,setCheck:l,selectSquare:h,setSelected:g,isDraggable:E,canMove:b,userMove:v,apiMove:p,playPremove:k,unsetPremove:s,cancelMove:x,stop:C,getKeyAtDomPos:A,getMaterialDiff:S}},{"./anim":3,"./hold":12,"./premove":14,"./util":16}],6:[function(e,t,n){var r=e("merge"),o=e("./board"),a=e("./fen");t.exports=function(e,t){t&&(t.movable&&t.movable.dests&&delete e.movable.dests,r.recursive(e,t),e.fen&&(e.pieces=a.read(e.fen),e.check=t.check,e.drawable.shapes=[],delete e.fen),e.check===!0&&o.setCheck(e),e.movable.dropped=[],e.selected&&o.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<10)&&(e.animation.enabled=!1))}},{"./board":5,"./fen":11,merge:1}],7:[function(e,t,n){var r=e("./board"),o=e("./data"),a=e("./fen"),i=e("./configure"),l=e("./anim"),u=e("./drag");t.exports=function(e){this.data=o(e),this.vm={exploding:!1},this.getFen=function(){return a.write(this.data.pieces)}.bind(this),this.set=l(i,this.data),this.toggleOrientation=l(r.toggleOrientation,this.data),this.setPieces=l(r.setPieces,this.data),this.selectSquare=l(r.selectSquare,this.data,!0),this.apiMove=l(r.apiMove,this.data),this.playPremove=l(r.playPremove,this.data),this.cancelPremove=l(r.unsetPremove,this.data,!0),this.setCheck=l(r.setCheck,this.data,!0),this.cancelMove=l(function(e){r.cancelMove(e),u.cancel(e)}.bind(this),this.data,!0),this.stop=l(function(e){r.stop(e),u.cancel(e)}.bind(this),this.data,!0),this.explode=function(e){this.data.render&&(this.vm.exploding=e,this.data.renderRAF(),setTimeout(function(){this.vm.exploding=!1,this.data.renderRAF()}.bind(this),200))}.bind(this)}},{"./anim":3,"./board":5,"./configure":6,"./data":8,"./drag":9,"./fen":11}],8:[function(e,t,n){var r=e("./fen"),o=e("./configure");t.exports=function(e){var t={pieces:r.read(r.initial),orientation:"white",turnColor:"white",check:null,lastMove:null,selected:null,coordinates:!0,render:null,renderRAF:null,element:null,bounds:null,autoCastle:!1,viewOnly:!1,minimalDom:!1,disableContextMenu:!1,highlight:{lastMove:!0,check:!0,dragOver:!0},animation:{enabled:!0,duration:200,current:{}},movable:{free:!0,color:"both",dests:{},dropOff:"revert",dropped:[],showDests:!0,events:{after:function(e,t,n){}}},premovable:{enabled:!0,showDests:!0,castle:!0,dests:[],current:null,events:{set:function(e,t){},unset:function(){}}},draggable:{enabled:!0,distance:3,autoDistance:!0,squareTarget:!1,centerPiece:!0,showGhost:!0,current:{}},stats:{dragged:!("ontouchstart"in window)},events:{change:function(){},move:function(e,t,n){},capture:function(e,t){},select:function(e){}},drawable:{enabled:!1,shapes:[],current:{}}};return o(t,e||{}),t}},{"./configure":6,"./fen":11}],9:[function(e,t,n){function r(e){return e?e.color+e.role:""}function o(e,t,n){var r=d.key2pos(n);return"white"!==e.orientation&&(r[0]=9-r[0],r[1]=9-r[1]),{left:t.left+t.width*(r[0]-1)/8,top:t.top+t.height*(8-r[1])/8,width:t.width/8,height:t.height/8}}function a(e,t){if(!(void 0!==t.button&&0!==t.button||t.touches&&t.touches.length>1)){t.stopPropagation(),t.preventDefault(),c=t.target;var n=e.selected,a=d.eventPosition(t),l=e.bounds(),u=f.getKeyAtDomPos(e,a,l),s=!!e.premovable.current;f.selectSquare(e,u);var p=e.selected===u;if(e.pieces[u]&&p&&f.isDraggable(e,u)){var v=o(e,l,u);e.draggable.current={previouslySelected:n,orig:u,piece:r(e.pieces[u]),rel:a,epos:a,pos:[0,0],dec:e.draggable.centerPiece?[a[0]-(v.left+v.width/2),a[1]-(v.top+v.height/2)]:[0,0],bounds:l,started:e.draggable.autoDistance&&e.stats.dragged}}else s&&f.unsetPremove(e);i(e)}}function i(e){d.requestAnimationFrame(function(){var t=e.draggable.current;t.orig&&(e.animation.current.start&&e.animation.current.anims[t.orig]&&(e.animation.current={}),r(e.pieces[t.orig])!==t.piece?s(e):(!t.started&&d.distance(t.epos,t.rel)>=e.draggable.distance&&(t.started=!0),t.started&&(t.pos=[t.epos[0]-t.rel[0],t.epos[1]-t.rel[1]],t.over=f.getKeyAtDomPos(e,t.epos,t.bounds)))),e.render(),t.orig&&i(e)})}function l(e,t){t.touches&&t.touches.length>1||e.draggable.current.orig&&(e.draggable.current.epos=d.eventPosition(t))}function u(e,t){var n=e.draggable,r=n.current?n.current.orig:null;if(r&&(!t||"touchend"!==t.type||c===t.target)){f.unsetPremove(e);var o=n.current.over;n.current.started&&(r!==o&&(e.movable.dropped=[r,o]),f.userMove(e,r,o)&&(e.stats.dragged=!0)),r!==n.current.previouslySelected||r!==o&&o||f.setSelected(e,null),n.current={}}}function s(e){e.draggable.current.orig&&(e.draggable.current={},f.selectSquare(e,null))}var c,f=e("./board"),d=e("./util");t.exports={start:a,move:l,end:u,cancel:s,processDrag:i}},{"./board":5,"./util":16}],10:[function(e,t,n){function r(e,t){if(!(t.touches&&t.touches.length>1)){t.stopPropagation(),t.preventDefault(),d.cancelMove(e);var n=p.eventPosition(t),r=e.bounds(),a=d.getKeyAtDomPos(e,n,r);e.drawable.current={orig:a,over:a,epos:n,bounds:r},o(e)}}function o(e){p.requestAnimationFrame(function(){var t=e.drawable.current;t.orig&&(t.over=d.getKeyAtDomPos(e,t.epos,t.bounds)),e.render(),t.orig&&o(e)})}function a(e,t){e.drawable.current.orig&&(e.drawable.current.epos=p.eventPosition(t))}function i(e,t){var n=e.drawable,r=n.current.orig,o=n.current.over;r&&o&&(r===o?c(n,r):f(n,r,o),n.current={},e.render())}function l(e){e.drawable.current.orig&&(e.drawable.current={})}function u(e,t){0!==t.button||t.shiftKey||(e.drawable.shapes=[],e.render())}function s(e){return function(t){return!e(t)}}function c(e,t){var n=function(e){return 1===e.length&&e[0]===t},r=e.shapes.filter(n).length>0;r?e.shapes=e.shapes.filter(s(n)):e.shapes.push([t])}function f(e,t,n){var r=function(e){return 2===e.length&&(e[0]===t&&e[1]===n||e[1]===t&&e[0]===n)},o=e.shapes.filter(r).length>0;o?e.shapes=e.shapes.filter(s(r)):e.shapes.push([t,n])}var d=e("./board"),p=e("./util");t.exports={start:r,move:a,end:i,cancel:l,clear:u,processDraw:o}},{"./board":5,"./util":16}],11:[function(e,t,n){function r(e){"start"===e&&(e=i);
var t={};return e.replace(/ .+$/,"").split("/").forEach(function(e,n){var r=0;e.split("").forEach(function(e){var o=parseInt(e);o?r+=o:(r++,t[a.pos2key([r,8-n])]={role:l[e.toLowerCase()],color:e===e.toLowerCase()?"black":"white"})})}),t}function o(e){return[8,7,6,5,4,3,2].reduce(function(e,t){return e.replace(new RegExp(Array(t+1).join("1"),"g"),t)},a.invRanks.map(function(t){return a.ranks.map(function(n){var r=e[a.pos2key([n,t])];if(r){var o=u[r.role];return"white"===r.color?o.toUpperCase():o}return"1"}).join("")}).join("/"))}var a=e("./util"),i="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",l={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},u={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};t.exports={initial:i,read:r,write:o}},{"./util":16}],12:[function(e,t,n){var r,o=function(){r=new Date},a=function(){r=null},i=function(){if(!r)return 0;var e=new Date-r;return r=null,e};t.exports={start:o,cancel:a,stop:i}},{}],13:[function(e,t,n){function r(e,t){var n=new a(t);return o.render(e,i(n)),l(n)}var o=e("mithril"),a=e("./ctrl"),i=e("./view"),l=e("./api");t.exports=r,t.exports.controller=a,t.exports.view=i,t.exports.fen=e("./fen"),t.exports.util=e("./util"),t.exports.configure=e("./configure"),t.exports.anim=e("./anim"),t.exports.board=e("./board"),t.exports.drag=e("./drag")},{"./anim":3,"./api":4,"./board":5,"./configure":6,"./ctrl":7,"./drag":9,"./fen":11,"./util":16,"./view":17,mithril:2}],14:[function(e,t,n){function r(e,t){return Math.abs(e-t)}function o(e,t,n,o,a){return r(t,o)<2&&("white"===e?a===n+1||2>=n&&a===n+2&&t===o:a===n-1||n>=7&&a===n-2&&t===o)}function a(e,t,n,o){var a=r(e,n),i=r(t,o);return 1===a&&2===i||2===a&&1===i}function i(e,t,n,o){return r(e,n)===r(t,o)}function l(e,t,n,r){return e===n||t===r}function u(e,t,n,r){return i(e,t,n,r)||l(e,t,n,r)}function s(e,t,n,o,a,i,l){return r(o,i)<2&&r(a,l)<2||n&&a===l&&a===("white"===e?1:8)&&(5===o&&(3===i||7===i)||d.containsX(t,i))}function c(e,t){return Object.keys(e).filter(function(n){var r=e[n];return r&&r.color===t&&"rook"===r.role}).map(function(e){return d.key2pos(e)[0]})}function f(e,t,n){var r,f=e[t],p=d.key2pos(t);switch(f.role){case"pawn":r=o.bind(null,f.color);break;case"knight":r=a;break;case"bishop":r=i;break;case"rook":r=l;break;case"queen":r=u;break;case"king":r=s.bind(null,f.color,c(e,f.color),n)}return d.allPos.filter(function(e){return(p[0]!==e[0]||p[1]!==e[1])&&r(p[0],p[1],e[0],e[1])}).map(d.pos2key)}var d=e("./util");t.exports=f},{"./util":16}],15:[function(e,t,n){function r(e){return(e?2:4)/512*p.width}function o(e){return(e?7:10)/512*p.width}function a(e){return e?.5:1}function i(){return 24/512*p.width}function l(e){var t=p.width/8;return[(e[0]-.5)*t,(8.5-e[1])*t]}function u(e,t){var n=l(e),o=r(t),i=p.width/16;return{tag:"circle",attrs:{stroke:g,"stroke-width":o,fill:"none",opacity:a(t),cx:n[0],cy:n[1],r:i-o/2}}}function s(e,t,n){var r=i(),u=l(e),s=l(t),c=s[0]-u[0],f=s[1]-u[1],d=Math.atan2(f,c),p=Math.cos(d)*r,v=Math.sin(d)*r;return{tag:"line",attrs:{stroke:g,"stroke-width":o(n),"stroke-linecap":"round","marker-end":"url(#arrowhead)",opacity:a(n),x1:u[0],y1:u[1],x2:s[0]-p,y2:s[1]-v}}}function c(e,t){return"white"===t?e:[9-e[0],9-e[1]]}function f(e){return function(t){return t.map(function(t){return c(h(t),e)})}}function d(e){var t=e.drawable.current;if(t.orig&&t.over){var n=f(e.orientation)(t.orig===t.over?[t.orig]:[t.orig,t.over]);return 1===n.length?u(n[0],!0):s(n[0],n[1],!0)}}var p,v=e("mithril"),h=e("./util").key2pos,g="#008800",m=v("defs",v("marker",{id:"arrowhead",orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01},v("path",{d:"M0,0 V4 L3,2 Z",fill:g})));t.exports=function(e){if(e.data.bounds){var t=e.data.drawable.shapes.map(f(e.data.orientation));if((t.length||e.data.drawable.current.orig)&&(p||(p=e.data.bounds()),p.width===p.height))return{tag:"svg",children:[m,t.map(function(e){return 1===e.length?u(e[0],!1):2===e.length?s(e[0],e[1],!1):void 0}),d(e.data)]}}}},{"./util":16,mithril:2}],16:[function(e,t,n){function r(e){return y[e[0]-1]+e[1]}function o(e){return[y.indexOf(e[0])+1,parseInt(e[1])]}function a(e){return y[7-y.indexOf(e[0])]+(9-parseInt(e[1]))}function i(e){var t=[];for(var n in e)e[n]&&t.push(n);return t.join(" ")}function l(e){return"white"===e?"black":"white"}function u(e,t){return e&&(e[0]===t||e[1]===t)}function s(e,t){return e&&-1!==e.indexOf(t)}function c(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function f(){return"transform"in document.body.style?"transform":"webkitTransform"in document.body.style?"webkitTransform":"mozTransform"in document.body.style?"mozTransform":"oTransform"in document.body.style?"oTransform":"msTransform"}function d(){return b||(b=f()),b}function p(e){return"translate3d("+e[0]+"px,"+e[1]+"px,0)"}function v(e){return e.touches?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:[e.clientX,e.clientY]}function h(e,t){return e.bind.apply(e,[null].concat(t))}function g(){return h(arguments[0],Array.prototype.slice.call(arguments,1))}function m(e){return 2===e.buttons||2===e.button}var b,y="abcdefgh".split(""),w=[1,2,3,4,5,6,7,8],E=[8,7,6,5,4,3,2,1],k=function(){var e=[];return E.forEach(function(t){w.forEach(function(n){e.push([n,t])})}),e}(),x=k.slice().reverse(),C=k.map(r);t.exports={files:y,ranks:w,invRanks:E,allPos:k,invPos:x,allKeys:C,pos2key:r,key2pos:o,invertKey:a,classSet:i,opposite:l,translate:p,contains2:u,containsX:s,distance:c,eventPosition:v,partialApply:h,partial:g,transformProp:d,requestAnimationFrame:(window.requestAnimationFrame||window.setTimeout).bind(window),isRightButton:m}},{}],17:[function(e,t,n){function r(e){return["cg-piece",e.role,e.color].join(" ")}function o(e,t,n){var o={style:{},"class":r(n)},a=e.data.draggable.current;if(a.orig===t&&a.started)o.style[g.transformProp()]=g.translate([a.pos[0]+a.dec[0],a.pos[1]+a.dec[1]]),o["class"]+=" dragging";else if(e.data.animation.current.anims){var i=e.data.animation.current.anims[t];i&&(o.style[g.transformProp()]=g.translate(i[1]))}return{tag:"div",attrs:o}}function a(e){return{tag:"div",attrs:{"class":r(e)+" ghost"}}}function i(e,t,n){var r=g.files[t[0]-1],i=t[1],l=r+i,u=e.data.pieces[l],s=e.data.highlight.dragOver&&e.data.draggable.current.over===l,c={"class":"cg-square "+l+" "+g.classSet({selected:e.data.selected===l,check:e.data.highlight.check&&e.data.check===l,"last-move":e.data.highlight.lastMove&&g.contains2(e.data.lastMove,l),"move-dest":(s||e.data.movable.showDests)&&g.containsX(e.data.movable.dests[e.data.selected],l),"premove-dest":(s||e.data.premovable.showDests)&&g.containsX(e.data.premovable.dests,l),"current-premove":g.contains2(e.data.premovable.current,l),"drag-over":s,occupied:!!u,exploding:e.vm.exploding&&-1!==e.vm.exploding.indexOf(l)}),style:{left:12.5*(n?t[0]-1:8-t[0])+"%",bottom:12.5*(n?t[1]-1:8-t[1])+"%"}};e.data.coordinates&&(t[1]===(n?1:8)&&(c["data-coord-x"]=r),t[0]===(n?8:1)&&(c["data-coord-y"]=i));var f=[];return u&&(f.push(o(e,l,u)),e.data.draggable.current.orig===l&&e.data.draggable.showGhost&&f.push(a(u))),{tag:"div",attrs:c,children:f}}function l(e,t){var n=g.key2pos(t.over),r="white"===e.data.orientation?n[0]:9-n[0],o="white"===e.data.orientation?n[1]:9-n[1];return{tag:"div",attrs:{id:"cg-square-target",style:{width:t.bounds.width/4+"px",height:t.bounds.height/4+"px",left:(r-1.5)*t.bounds.width/8+"px",top:(7.5-o)*t.bounds.height/8+"px"}}}}function u(e){return{tag:"div",attrs:{"class":"cg-square fading",style:{left:e.left,bottom:e.bottom,opacity:e.opacity}},children:[{tag:"div",attrs:{"class":r(e.piece)}}]}}function s(e,t){var n=[];e.data.lastMove&&e.data.lastMove.forEach(function(e){var r=g.key2pos(e);n.push({tag:"div",attrs:{"class":"cg-square last-move",style:{left:12.5*(t?r[0]-1:8-r[0])+"%",bottom:12.5*(t?r[1]-1:8-r[1])+"%"}}})});for(var o=Object.keys(e.data.pieces),a=0,i=o.length;i>a;a++){var l=o[a],u=g.key2pos(l),s={style:{left:12.5*(t?u[0]-1:8-u[0])+"%",bottom:12.5*(t?u[1]-1:8-u[1])+"%"},"class":r(e.data.pieces[l])};if(e.data.animation.current.anims){var c=e.data.animation.current.anims[l];c&&(s.style[g.transformProp()]=g.translate(c[1]))}n.push({tag:"div",attrs:s})}return n}function c(e){var t="white"===e.data.orientation;if(e.data.minimalDom)return s(e,t);for(var n=t?g.allPos:g.invPos,r=[],o=0,a=n.length;a>o;o++)r.push(i(e,n[o],t));return e.data.draggable.current.over&&e.data.draggable.squareTarget&&r.push(l(e,e.data.draggable.current)),e.data.animation.current.fadings&&e.data.animation.current.fadings.forEach(function(e){r.push(u(e))}),e.data.drawable.enabled&&r.push(m(e)),r}function f(e,t,n){return function(r){e.drawable.enabled&&(r.shiftKey||g.isRightButton(r))?n(e,r):e.viewOnly||t(e,r)}}function d(e,t,n){var r=e.data,o=f(r,v.start,h.start),a=f(r,v.move,h.move),i=f(r,v.end,h.end),l=g.partial(h.clear,r),u=["touchstart","mousedown"],s=["touchmove","mousemove"],c=["touchend","mouseup"];u.forEach(function(e){t.addEventListener(e,o)}),s.forEach(function(e){document.addEventListener(e,a)}),c.forEach(function(e){document.addEventListener(e,i)}),t.addEventListener("mousedown",l),n.onunload=function(){u.forEach(function(e){t.removeEventListener(e,o)}),s.forEach(function(e){document.removeEventListener(e,a)}),c.forEach(function(e){document.removeEventListener(e,i)}),t.removeEventListener("mousedown",l)}}function p(e){return{tag:"div",attrs:{"class":"cg-board orientation-"+e.data.orientation,config:function(t,n,r){n||((!e.data.viewOnly||e.data.drawable.enabled)&&d(e,t,r),e.data.render=function(){b.render(t,c(e))},e.data.renderRAF=function(){g.requestAnimationFrame(e.data.render)},e.data.bounds=t.getBoundingClientRect.bind(t),e.data.element=t,e.data.render())}},children:[]}}var v=e("./drag"),h=e("./draw"),g=e("./util"),m=e("./svg"),b=e("mithril");t.exports=function(e){return{tag:"div",attrs:{config:function(t,n){n||t.addEventListener("contextmenu",function(t){return e.data.disableContextMenu||e.data.drawable.enabled?(t.preventDefault(),!1):void 0})},"class":["cg-board-wrap",e.data.viewOnly?"view-only":"manipulable",e.data.minimalDom?"minimal-dom":"full-dom"].join(" ")},children:[p(e)]}}},{"./drag":9,"./draw":10,"./svg":15,"./util":16,mithril:2}],18:[function(e,t,n){!function(e,n){"undefined"!=typeof t?t.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[e]=n()}("domready",function(){var e,t=[],n=document,r=n.documentElement.doScroll,o="DOMContentLoaded",a=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return a||n.addEventListener(o,e=function(){for(n.removeEventListener(o,e),a=1;e=t.shift();)e()}),function(e){a?setTimeout(e,0):t.push(e)}})},{}],19:[function(e,t,n){function r(e){return"w"==e.turn()?"white":"black"}function o(e){var t={};return e.SQUARES.forEach(function(n){var r=e.moves({square:n,verbose:!0});r.length&&(t[n]=r.map(function(e){return e.to}))}),t}function a(e,t,n){return{orientation:t,viewOnly:n,turnColor:"white",animation:{duration:500},movable:{free:!1,color:r(e),premove:!0,dests:o(e),events:{after:c}},drawable:{enabled:!0}}}var i,l=e("./chess_js"),u=e("domready"),s=e("chessground"),c=function(e,t){i.move({from:e,to:t}),ground.set({turnColor:r(i),movable:{color:r(i),dests:o(i)}})};u(function(){game1=new l.Chess(void 0,!0),game2=new l.Chess(void 0,!0),board1=s(document.getElementById("board1"),a(game1,"white",!1)),board2=s(document.getElementById("board2"),a(game2,"black",!0))})},{"./chess_js":20,chessground:13,domready:18}],20:[function(e,t,n){"use strict";/* @license
 * Copyright (c) 2015, Jeff Hlywa (jhlywa@gmail.com)
 * Released under the BSD license
 * https://github.com/jhlywa/chess.js/blob/master/LICENSE
 */
var r=function(e,t){function n(){ue=new Array(128),se={w:j,b:j},ce=I,fe={w:0,b:0},de=j,pe=0,ve=1,he=[],ge={},u(i())}function r(){o(z)}function o(e){var t=e.split(/\s+/),r=t[0],o=0;if(!a(e).valid)return!1;n();for(var l=0;l<r.length;l++){var s=r.charAt(l);if("/"===s)o+=8;else if(N(s))o+=parseInt(s,10);else{var f="a">s?I:q;c({type:s.toLowerCase(),color:f},P(o)),o++}}return ce=t[1],t[2].indexOf("K")>-1&&(fe.w|=te.KSIDE_CASTLE),t[2].indexOf("Q")>-1&&(fe.w|=te.QSIDE_CASTLE),t[2].indexOf("k")>-1&&(fe.b|=te.KSIDE_CASTLE),t[2].indexOf("q")>-1&&(fe.b|=te.QSIDE_CASTLE),de="-"===t[3]?j:ie[t[3]],pe=parseInt(t[4],10),ve=parseInt(t[5],10),u(i()),!0}function a(e){var t={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large]."},n=e.split(/\s+/);if(6!==n.length)return{valid:!1,error_number:1,error:t[1]};if(isNaN(n[5])||parseInt(n[5],10)<=0)return{valid:!1,error_number:2,error:t[2]};if(isNaN(n[4])||parseInt(n[4],10)<0)return{valid:!1,error_number:3,error:t[3]};if(!/^(-|[abcdefgh][36])$/.test(n[3]))return{valid:!1,error_number:4,error:t[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(n[2]))return{valid:!1,error_number:5,error:t[5]};if(!/^(w|b)$/.test(n[1]))return{valid:!1,error_number:6,error:t[6]};var r=n[0].split("/");if(8!==r.length)return{valid:!1,error_number:7,error:t[7]};for(var o=0;o<r.length;o++){for(var a=0,i=!1,l=0;l<r[o].length;l++)if(isNaN(r[o][l])){if(!/^[prnbqkPRNBQK]$/.test(r[o][l]))return{valid:!1,error_number:9,error:t[9]};a+=1,i=!1}else{if(i)return{valid:!1,error_number:8,error:t[8]};a+=parseInt(r[o][l],10),i=!0}if(8!==a)return{valid:!1,error_number:10,error:t[10]}}return{valid:!0,error_number:0,error:t[0]}}function i(){for(var e=0,t="",n=ie.a8;n<=ie.h1;n++){if(null==ue[n])e++;else{e>0&&(t+=e,e=0);var r=ue[n].color,o=ue[n].type;t+=r===I?o.toUpperCase():o.toLowerCase()}n+1&136&&(e>0&&(t+=e),n!==ie.h1&&(t+="/"),e=0,n+=8)}var a="";fe[I]&te.KSIDE_CASTLE&&(a+="K"),fe[I]&te.QSIDE_CASTLE&&(a+="Q"),fe[q]&te.KSIDE_CASTLE&&(a+="k"),fe[q]&te.QSIDE_CASTLE&&(a+="q"),a=a||"-";var i=de===j?"-":P(de);return[t,ce,a,i,pe,ve].join(" ")}function l(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(ge[e[t]]=e[t+1]);return ge}function u(e){he.length>0||(e!==z?(ge.SetUp="1",ge.FEN=e):(delete ge.SetUp,delete ge.FEN))}function s(e){var t=ue[ie[e]];return t?{type:t.type,color:t.color}:null}function c(e,t){if(!("type"in e&&"color"in e))return!1;if(-1===G.indexOf(e.type.toLowerCase()))return!1;if(!(t in ie))return!1;var n=ie[t];return e.type==$&&se[e.color]!=j&&se[e.color]!=n?!1:(ue[n]={type:e.type,color:e.color},e.type===$&&(se[e.color]=n),u(i()),!0)}function f(e){var t=s(e);return ue[ie[e]]=null,t&&t.type===$&&(se[t.color]=j),u(i()),t}function d(e,t,n,r,o){var a={color:ce,from:t,to:n,flags:r,piece:e[t].type};return o&&(a.flags|=te.PROMOTION,a.promotion=o),e[n]?a.captured=e[n].type:r&te.EP_CAPTURE&&(a.captured=K),a}function p(e){function t(e,t,n,r,o){if(e[n].type!==K||T(r)!==ae&&T(r)!==ne)t.push(d(e,n,r,o));else for(var a=[F,Q,B,U],i=0,l=a.length;l>i;i++)t.push(d(e,n,r,o,a[i]))}var n=[],r=ce,o=_(r),a={b:oe,w:re},i=ie.a8,l=ie.h1,u=!1,s="undefined"!=typeof e&&"legal"in e?e.legal:!0;if("undefined"!=typeof e&&"square"in e){if(!(e.square in ie))return[];i=l=ie[e.square],u=!0}for(var c=i;l>=c;c++)if(136&c)c+=7;else{var f=ue[c];if(null!=f&&f.color===r)if(f.type===K){var p=c+W[r][0];if(null==ue[p]){t(ue,n,c,p,te.NORMAL);var p=c+W[r][1];a[r]===T(c)&&null==ue[p]&&t(ue,n,c,p,te.BIG_PAWN)}for(v=2;4>v;v++){var p=c+W[r][v];136&p||(null!=ue[p]&&ue[p].color===o?t(ue,n,c,p,te.CAPTURE):p===de&&t(ue,n,c,de,te.EP_CAPTURE))}}else for(var v=0,m=J[f.type].length;m>v;v++)for(var b=J[f.type][v],p=c;;){if(p+=b,136&p)break;if(null!=ue[p]){if(ue[p].color===r)break;t(ue,n,c,p,te.CAPTURE);break}if(t(ue,n,c,p,te.NORMAL),"n"===f.type||"k"===f.type)break}}if(!u||l===se[r]){if(fe[r]&te.KSIDE_CASTLE){var y=se[r],w=y+2;null!=ue[y+1]||null!=ue[w]||h(o,se[r])||h(o,y+1)||h(o,w)||t(ue,n,se[r],w,te.KSIDE_CASTLE)}if(fe[r]&te.QSIDE_CASTLE){var y=se[r],w=y-2;null!=ue[y-1]||null!=ue[y-2]||null!=ue[y-3]||h(o,se[r])||h(o,y-1)||h(o,w)||t(ue,n,se[r],w,te.QSIDE_CASTLE)}}if(!s)return n;for(var E=[],c=0,m=n.length;m>c;c++)x(n[c]),(!g(r)||X)&&E.push(n[c]),C();return E}function v(e){var t="";if(e.flags&te.KSIDE_CASTLE)t="O-O";else if(e.flags&te.QSIDE_CASTLE)t="O-O-O";else{var n=A(e);e.piece!==K&&(t+=e.piece.toUpperCase()+n),e.flags&(te.CAPTURE|te.EP_CAPTURE)&&(e.piece===K&&(t+=P(e.from)[0]),t+="x"),t+=P(e.to),e.flags&te.PROMOTION&&(t+="="+e.promotion.toUpperCase())}return x(e),m()&&(t+=b()?"#":"+"),C(),t}function h(e,t){for(var n=ie.a8;n<=ie.h1;n++)if(136&n)n+=7;else if(null!=ue[n]&&ue[n].color===e){var r=ue[n],o=n-t,a=o+119;if(Y[a]&1<<Z[r.type]){if(r.type===K){if(o>0){if(r.color===I)return!0}else if(r.color===q)return!0;continue}if("n"===r.type||"k"===r.type)return!0;for(var i=V[a],l=n+i,u=!1;l!==t;){if(null!=ue[l]){u=!0;break}l+=i}if(!u)return!0}}return!1}function g(e){return h(_(e),se[e])}function m(){return g(ce)}function b(){return m()&&0===p().length}function y(){return!m()&&0===p().length}function w(){for(var e={},t=[],n=0,r=0,o=ie.a8;o<=ie.h1;o++)if(r=(r+1)%2,136&o)o+=7;else{var a=ue[o];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===B&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[B]||1===e[U]))return!0;if(n===e[B]+2){for(var i=0,l=t.length,o=0;l>o;o++)i+=t[o];if(0===i||i===l)return!0}return!1}function E(){for(var e=[],t={},n=!1;;){var r=C();if(!r)break;e.push(r)}for(;;){var o=i().split(" ").slice(0,4).join(" ");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(n=!0),!e.length)break;x(e.pop())}return n}function k(e){he.push({move:e,kings:{b:se.b,w:se.w},turn:ce,castling:{b:fe.b,w:fe.w},ep_square:de,half_moves:pe,move_number:ve})}function x(e){var t=ce,n=_(t);if(k(e),ue[e.to]=ue[e.from],ue[e.from]=null,e.flags&te.EP_CAPTURE&&(ce===q?ue[e.to-16]=null:ue[e.to+16]=null),e.flags&te.PROMOTION&&(ue[e.to]={type:e.promotion,color:t}),ue[e.to].type===$){if(se[ue[e.to].color]=e.to,e.flags&te.KSIDE_CASTLE){var r=e.to-1,o=e.to+1;ue[r]=ue[o],ue[o]=null}else if(e.flags&te.QSIDE_CASTLE){var r=e.to+1,o=e.to-2;ue[r]=ue[o],ue[o]=null}fe[t]=""}if(fe[t])for(var a=0,i=le[t].length;i>a;a++)if(e.from===le[t][a].square&&fe[t]&le[t][a].flag){fe[t]^=le[t][a].flag;break}if(fe[n])for(var a=0,i=le[n].length;i>a;a++)if(e.to===le[n][a].square&&fe[n]&le[n][a].flag){fe[n]^=le[n][a].flag;break}de=e.flags&te.BIG_PAWN?"b"===ce?e.to-16:e.to+16:j,e.piece===K?pe=0:e.flags&(te.CAPTURE|te.EP_CAPTURE)?pe=0:pe++,ce===q&&ve++,ce=_(ce)}function C(){var e=he.pop();if(null==e)return null;var t=e.move;se=e.kings,ce=e.turn,fe=e.castling,de=e.ep_square,pe=e.half_moves,ve=e.move_number;var n=ce,r=_(ce);if(ue[t.from]=ue[t.to],ue[t.from].type=t.piece,ue[t.to]=null,t.flags&te.CAPTURE)ue[t.to]={type:t.captured,color:r};else if(t.flags&te.EP_CAPTURE){var o;o=n===q?t.to-16:t.to+16,ue[o]={type:K,color:r}}if(t.flags&(te.KSIDE_CASTLE|te.QSIDE_CASTLE)){var a,i;t.flags&te.KSIDE_CASTLE?(a=t.to+1,i=t.to-1):t.flags&te.QSIDE_CASTLE&&(a=t.to-2,i=t.to+1),ue[a]=ue[i],ue[i]=null}return t}function A(e){for(var t=p(),n=e.from,r=e.to,o=e.piece,a=0,i=0,l=0,u=0,s=t.length;s>u;u++){var c=t[u].from,f=t[u].to,d=t[u].piece;o===d&&n!==c&&r===f&&(a++,T(n)===T(c)&&i++,O(n)===O(c)&&l++)}return a>0?i>0&&l>0?P(n):l>0?P(n).charAt(1):P(n).charAt(0):""}function S(){for(var e="   +------------------------+\n",t=ie.a8;t<=ie.h1;t++){if(0===O(t)&&(e+=" "+"87654321"[T(t)]+" |"),null==ue[t])e+=" . ";else{var n=ue[t].type,r=ue[t].color,o=r===I?n.toUpperCase():n.toLowerCase();e+=" "+o+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}function T(e){return e>>4}function O(e){return 15&e}function P(e){var t=O(e),n=T(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function _(e){return e===I?q:I}function N(e){return-1!=="0123456789".indexOf(e)}function R(e){var t=D(e);t.san=v(t),t.to=P(t.to),t.from=P(t.from);var n="";for(var r in te)te[r]&t.flags&&(n+=ee[r]);return t.flags=n,t}function D(e){var t=e instanceof Array?[]:{};for(var n in e)"object"==typeof n?t[n]=D(e[n]):t[n]=e[n];return t}function L(e){return e.replace(/^\s+|\s+$/g,"")}function M(e){for(var t=p({legal:!1}),n=0,r=ce,o=0,a=t.length;a>o;o++){if(x(t[o]),!g(r)||X)if(e-1>0){var i=M(e-1);n+=i}else n++;C()}return n}var q="b",I="w",j=-1,K="p",U="n",B="b",Q="r",F="q",$="k",G="pnbrqkPNBRQK",z="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",H=["1-0","0-1","1/2-1/2","*"],X=!1,W={b:[16,32,17,15],w:[-16,-32,-17,-15]},J={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Y=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],V=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Z={p:0,n:1,b:2,r:3,q:4,k:5},ee={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},te={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},ne=7,re=6,oe=1,ae=0,ie={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},le={w:[{square:ie.a1,flag:te.QSIDE_CASTLE},{square:ie.h1,flag:te.KSIDE_CASTLE}],b:[{square:ie.a8,flag:te.QSIDE_CASTLE},{square:ie.h8,flag:te.KSIDE_CASTLE}]},ue=new Array(128),se={w:j,b:j},ce=I,fe={w:0,b:0},de=j,pe=0,ve=1,he=[],ge={};return o("undefined"==typeof e?z:e),X="undefined"==typeof t?!1:!0,{WHITE:I,BLACK:q,PAWN:K,KNIGHT:U,BISHOP:B,ROOK:Q,QUEEN:F,KING:$,SQUARES:function(){for(var e=[],t=ie.a8;t<=ie.h1;t++)136&t?t+=7:e.push(P(t));return e}(),FLAGS:ee,load:function(e){return o(e)},reset:function(){return r()},moves:function(e){for(var t=p(e),n=[],r=0,o=t.length;o>r;r++)"undefined"!=typeof e&&"verbose"in e&&e.verbose?n.push(R(t[r])):n.push(v(t[r]));return n},in_check:function(){return m()},in_checkmate:function(){return b()},in_stalemate:function(){return y()},in_draw:function(){return pe>=100||y()||w()||E()},insufficient_material:function(){return w()},in_threefold_repetition:function(){return E()},game_over:function(){return pe>=100||b()||y()||w()||E()},validate_fen:function(e){return a(e)},fen:function(){return i()},pgn:function(e){var t="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",n="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,r=[],o=!1;for(var a in ge)r.push("["+a+' "'+ge[a]+'"]'+t),o=!0;o&&he.length&&r.push(t);for(var i=[];he.length>0;)i.push(C());for(var l=[],u="",s=1;i.length>0;){var c=i.pop();1===s&&"b"===c.color?(u="1. ...",s++):"w"===c.color&&(u.length&&l.push(u),u=s+".",s++),u=u+" "+v(c),x(c)}if(u.length&&l.push(u),"undefined"!=typeof ge.Result&&l.push(ge.Result),0===n)return r.join("")+l.join(" ");for(var f=0,a=0;a<l.length;a++)f+l[a].length>n&&0!==a?(" "===r[r.length-1]&&r.pop(),r.push(t),f=0):0!==a&&(r.push(" "),f++),r.push(l[a]),f+=l[a].length;return r.join("")},load_pgn:function(e,t){function n(e){return e.replace(/\\/g,"\\")}function a(e){for(var t=e.replace(/[+#?!=]/,""),n=p(),r=0,o=n.length;o>r;r++)if(t==v(n[r]).replace(/[+#?!=]/,""))return n[r];return null}function i(e){return a(L(e))}function u(e){var t=!1;for(var n in e)t=!0;return t}function s(e,t){for(var r="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",o={},a=e.split(new RegExp(n(r))),i="",l="",u=0;u<a.length;u++)i=a[u].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),l=a[u].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),L(i).length>0&&(o[i]=l);return o}var c="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",f=new RegExp("^(\\[(.|"+n(c)+")*\\])("+n(c)+")*1.("+n(c)+"|.)*$","g"),d=e.replace(f,"$1");"["!==d[0]&&(d=""),r();var h=s(d,t);for(var g in h)l([g,h[g]]);if("1"===h.SetUp&&!("FEN"in h&&o(h.FEN)))return!1;var m=e.replace(d,"").replace(new RegExp(n(c),"g")," ");m=m.replace(/(\{[^}]+\})+?/g,""),m=m.replace(/\d+\./g,""),m=m.replace(/\.\.\./g,"");var b=L(m).split(new RegExp(/\s+/));b=b.join(",").replace(/,,+/g,",").split(",");for(var y="",w=0;w<b.length-1;w++){if(y=i(b[w]),null==y)return!1;x(y)}if(y=b[b.length-1],H.indexOf(y)>-1)u(ge)&&"undefined"==typeof ge.Result&&l(["Result",y]);else{if(y=i(y),null==y)return!1;x(y)}return!0},header:function(){return l(arguments)},ascii:function(){return S()},turn:function(){return ce},move:function(e){var t=null,n=p();if("string"==typeof e){for(var r=e.replace(/[+#?!=]/,""),o=0,a=n.length;a>o;o++)if(r===v(n[o]).replace(/[+#?!=]/,"")){t=n[o];break}}else if("object"==typeof e)for(var o=0,a=n.length;a>o;o++)if(!(e.from!==P(n[o].from)||e.to!==P(n[o].to)||"promotion"in n[o]&&e.promotion!==n[o].promotion)){t=n[o];break}if(!t)return null;var i=R(t);return x(t),i},undo:function(){var e=C();return e?R(e):null},clear:function(){return n()},put:function(e,t){return c(e,t)},get:function(e){return s(e)},remove:function(e){return f(e)},perft:function(e){return M(e)},square_color:function(e){if(e in ie){var t=ie[e];return(T(t)+O(t))%2===0?"light":"dark"}return null},history:function(e){for(var t=[],n=[],r=("undefined"!=typeof e&&"verbose"in e&&e.verbose);he.length>0;)t.push(C());for(;t.length>0;){var o=t.pop();r?n.push(R(o)):n.push(v(o)),x(o)}return n}}};"undefined"!=typeof n&&(n.Chess=r),"undefined"!=typeof define&&define(function(){return r})},{}]},{},[19]);
//# sourceMappingURL=./bundle.min.map